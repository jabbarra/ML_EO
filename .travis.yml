language: java
dist: trusty
jdk:
  - oraclejdk12
addons:
  sonarcloud:
    organization: "jabbarra"

cache:
  directories:
  - $HOME/.m2
script:
  - ./mvnw install sonar:sonar
before_install:
  - chmod +x mvnw
  - echo $JAVA_HOME
  - java --version
after_success:
  - bash <(curl -s https://codecov.io/bash)
deploy:
  provider: heroku
  api_key: $HEROKU_API_KEY
  app: config-server-h
  on:
    repo: jabbarra/config-server

## to do test notification, deploy, matrix